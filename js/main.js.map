{"version":3,"file":"main.js","sources":["../src/js/scene.js","../src/js/utils/polyfills.js","../src/js/main.js"],"sourcesContent":["\n\nexport class Scene {\n\n  constructor() {\n    this.init();\n  }\n\n  init() {\n    this.initMouseEvents();\n    this.initWindowEvents();\n  }\n\n  initMouseEvents() {\n    document.addEventListener( 'mousedown', (event) => this.onMouseDown(event), true );\n    //document.addEventListener( 'click', (event) => this.onClick(event), true );\n    document.addEventListener( 'mouseup', (event) => this.onMouseUp(event), true );\n  }\n\n\n\n  initWindowEvents() {\n    window.addEventListener( 'resize', this.onWindowResize.bind(this), false );\n  }\n\n  onWindowResize() {\n    this.camera.aspect = window.innerWidth / window.innerHeight;\n    this.camera.updateProjectionMatrix();\n    this.renderer.setSize( window.innerWidth, window.innerHeight );\n  }\n\n\n\n  onMouseUp (event) {\n\n\n  }\n\n  onMouseDown(event) {\n\n\n  }\n\n\n}\n","/**\n * Various js polyfills\n */\n\n\nclass PolyfillsSingleton {\n\n  constructor() {\n\n  }\n\n  init() {\n    this.initCustomEventPolyfill();\n  }\n\n  initCustomEventPolyfill() {\n    if ( typeof window.CustomEvent === \"function\" ) return false;\n\n    function CustomEvent ( event, params ) {\n      params = params || { bubbles: false, cancelable: false, detail: undefined };\n      var evt = document.createEvent( 'CustomEvent' );\n      evt.initCustomEvent( event, params.bubbles, params.cancelable, params.detail );\n      return evt;\n    }\n\n    CustomEvent.prototype = window.Event.prototype;\n\n    window.CustomEvent = CustomEvent;\n  }\n\n}\n\n\nexport let Polyfills = new PolyfillsSingleton();","/**\n * Main application\n *\n */\n\nimport { Scene } from './scene';\nimport { Polyfills } from './utils/polyfills';\n\nclass Main {\n  constructor() {\n    Polyfills.init();\n    //new Scene();\n    this.metaKeys = [ [ 'post_title', 'Last Name'], ['first_name', 'First Name'], ['job_title', 'Job Title'], ['company_name', 'Company Name'], ['email', 'Email'], ['phone', 'Phone'], ['session_title', 'Session Title'], ['session_abstract', 'Session Abstract'], ['post_content', 'Bio'] ];\n    this.initUploadListener();\n  }\n\n  initUploadListener() {\n    var inputElement = document.getElementById(\"file-input\");\n    inputElement.addEventListener(\"change\", (event) => this.handleFiles(event), true);\n\n  }\n\n  handleFiles(e) {\n    console.log('handle');\n    var file = e.target.files[0]; /* now you can work with the file list */\n\n    this.csv = [];\n\n    var reader = new FileReader();\n    reader.readAsText(file);\n    reader.onloadend = ()=>{\n      let xml = $.parseXML(reader.result);\n      this.$xml = $(xml)\n      this.parseXML();\n\n      this.saveCSV();\n      this.showOutput();\n    };\n  }\n\n  parseXML() {\n\n    let $items = this.$xml.find(\"item\");\n\n    // set titles\n    let titles = [];\n    this.metaKeys.forEach((key)=> {\n      titles.push('\"' + key[1] + '\"');\n    });\n    titles.push(\"Photo\");\n    this.csv.push(titles);\n\n    $items.each((i, item) => {\n\n      let csvItem = [];\n      let $item = $(item);\n      let $postmeta = $item.find(\"postmeta\");\n\n      this.metaKeys.forEach((key)=> {\n\n        let metaValue = '';\n        $postmeta.each((j, meta)=> {\n          let $meta = $(meta);\n          let metaKey = $meta.find(\"meta_key\").text();\n\n          if (key[0] == metaKey) {\n            metaValue = $meta.find(\"meta_value\").text();\n          }\n        });\n        csvItem.push('\"' + metaValue + '\"');\n      });\n\n      let attachment_url = $item.find(\"attachment_url\").text();\n      csvItem.push(attachment_url);\n\n      this.csv.push(csvItem);\n    });\n  }\n\n  saveCSV() {\n    //var data = [[\"name1\", \"city1\", \"some other info\"], [\"name2\", \"city2\", \"more info\"]];\n    var csvContent = \"data:text/csv;charset=utf-8,\";\n    this.csv.forEach((infoArray, index)=>{\n      let dataString = infoArray.join(\",\");\n      csvContent += index < this.csv.length ? dataString+ \"\\n\" : dataString;\n    });\n\n    var encodedUri = encodeURI(csvContent);\n    var link = document.createElement(\"a\");\n    link.setAttribute(\"href\", encodedUri);\n    link.setAttribute(\"download\", \"speakers.csv\");\n    document.body.appendChild(link); // Required for FF\n    link.click();\n  }\n\n  showOutput() {\n    let $output = $(\"#output\");\n    let $content = $output.find(\".content\");\n\n    this.csv.forEach((item, i) => {\n      if (i > 0) {\n        let $item = $('<div class=\"item mt-5 mb-3\"><h3>Speaker</h3></div>');\n        item.forEach((value, n) => {\n          let key = this.csv[0][n].replace(new RegExp('\"', 'g'), \"\");\n          value = value.replace(new RegExp('\"', 'g'), \"\");\n          let $line = $('<p><strong>' + key + ': </strong><span>' + value + '</span></p>');\n          if (n == item.length - 1) {\n            $line = $('<p><strong>' + key + ': </strong></p><div><img style=\"display:block; max-width: 800px;\" src=\"' + value + '\"></div>');\n          }\n          $item.append($line);\n        });\n        $content.append($item);\n      }\n    });\n\n  }\n\n}\n\ndocument.addEventListener('DOMContentLoaded', event => new Main());\n"],"names":["Scene","init","initMouseEvents","initWindowEvents","addEventListener","event","onMouseDown","onMouseUp","onWindowResize","bind","camera","aspect","window","innerWidth","innerHeight","updateProjectionMatrix","renderer","setSize","PolyfillsSingleton","initCustomEventPolyfill","CustomEvent","params","bubbles","cancelable","detail","undefined","evt","document","createEvent","initCustomEvent","prototype","Event","Polyfills","Main","metaKeys","initUploadListener","inputElement","getElementById","handleFiles","e","log","file","target","files","csv","reader","FileReader","readAsText","onloadend","xml","$","parseXML","result","$xml","saveCSV","showOutput","$items","find","titles","forEach","key","push","each","i","item","csvItem","$item","$postmeta","metaValue","j","meta","$meta","metaKey","text","attachment_url","csvContent","infoArray","index","dataString","join","length","encodedUri","encodeURI","link","createElement","setAttribute","body","appendChild","click","$output","$content","value","n","replace","RegExp","$line","append"],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;IAEaA,KAAb;mBAEgB;;;SACPC,IAAL;;;;;2BAGK;WACAC,eAAL;WACKC,gBAAL;;;;sCAGgB;;;eACPC,gBAAT,CAA2B,WAA3B,EAAwC,UAACC,KAAD;eAAW,MAAKC,WAAL,CAAiBD,KAAjB,CAAX;OAAxC,EAA4E,IAA5E;;eAESD,gBAAT,CAA2B,SAA3B,EAAsC,UAACC,KAAD;eAAW,MAAKE,SAAL,CAAeF,KAAf,CAAX;OAAtC,EAAwE,IAAxE;;;;uCAKiB;aACVD,gBAAP,CAAyB,QAAzB,EAAmC,KAAKI,cAAL,CAAoBC,IAApB,CAAyB,IAAzB,CAAnC,EAAmE,KAAnE;;;;qCAGe;WACVC,MAAL,CAAYC,MAAZ,GAAqBC,OAAOC,UAAP,GAAoBD,OAAOE,WAAhD;WACKJ,MAAL,CAAYK,sBAAZ;WACKC,QAAL,CAAcC,OAAd,CAAuBL,OAAOC,UAA9B,EAA0CD,OAAOE,WAAjD;;;;8BAKST,KA/Bb,EA+BoB;;;gCAKNA,KApCd,EAoCqB;;;;;ACtCrB;;;;IAKMa;gCAEU;;;;;;2BAIP;WACAC,uBAAL;;;;8CAGwB;UACnB,OAAOP,OAAOQ,WAAd,KAA8B,UAAnC,EAAgD,OAAO,KAAP;;eAEvCA,WAAT,CAAuBf,KAAvB,EAA8BgB,MAA9B,EAAuC;iBAC5BA,UAAU,EAAEC,SAAS,KAAX,EAAkBC,YAAY,KAA9B,EAAqCC,QAAQC,SAA7C,EAAnB;YACIC,MAAMC,SAASC,WAAT,CAAsB,aAAtB,CAAV;YACIC,eAAJ,CAAqBxB,KAArB,EAA4BgB,OAAOC,OAAnC,EAA4CD,OAAOE,UAAnD,EAA+DF,OAAOG,MAAtE;eACOE,GAAP;;;kBAGUI,SAAZ,GAAwBlB,OAAOmB,KAAP,CAAaD,SAArC;;aAEOV,WAAP,GAAqBA,WAArB;;;;;;AAMJ,AAAO,IAAIY,YAAY,IAAId,kBAAJ,EAAhB;;ACjCP;;;;;AAKA,AACA,IAEMe;kBACU;;;cACFhC,IAAV;;SAEKiC,QAAL,GAAgB,CAAE,CAAE,YAAF,EAAgB,WAAhB,CAAF,EAAgC,CAAC,YAAD,EAAe,YAAf,CAAhC,EAA8D,CAAC,WAAD,EAAc,WAAd,CAA9D,EAA0F,CAAC,cAAD,EAAiB,cAAjB,CAA1F,EAA4H,CAAC,OAAD,EAAU,OAAV,CAA5H,EAAgJ,CAAC,OAAD,EAAU,OAAV,CAAhJ,EAAoK,CAAC,eAAD,EAAkB,eAAlB,CAApK,EAAwM,CAAC,kBAAD,EAAqB,kBAArB,CAAxM,EAAkP,CAAC,cAAD,EAAiB,KAAjB,CAAlP,CAAhB;SACKC,kBAAL;;;;;yCAGmB;;;UACfC,eAAeT,SAASU,cAAT,CAAwB,YAAxB,CAAnB;mBACajC,gBAAb,CAA8B,QAA9B,EAAwC,UAACC,KAAD;eAAW,MAAKiC,WAAL,CAAiBjC,KAAjB,CAAX;OAAxC,EAA4E,IAA5E;;;;gCAIUkC,GAAG;;;cACLC,GAAR,CAAY,QAAZ;UACIC,OAAOF,EAAEG,MAAF,CAASC,KAAT,CAAe,CAAf,CAAX,CAFa;;WAIRC,GAAL,GAAW,EAAX;;UAEIC,SAAS,IAAIC,UAAJ,EAAb;aACOC,UAAP,CAAkBN,IAAlB;aACOO,SAAP,GAAmB,YAAI;YACjBC,MAAMC,EAAEC,QAAF,CAAWN,OAAOO,MAAlB,CAAV;eACKC,IAAL,GAAYH,EAAED,GAAF,CAAZ;eACKE,QAAL;;eAEKG,OAAL;eACKC,UAAL;OANF;;;;+BAUS;;;UAELC,SAAS,KAAKH,IAAL,CAAUI,IAAV,CAAe,MAAf,CAAb;;;UAGIC,SAAS,EAAb;WACKxB,QAAL,CAAcyB,OAAd,CAAsB,UAACC,GAAD,EAAQ;eACrBC,IAAP,CAAY,MAAMD,IAAI,CAAJ,CAAN,GAAe,GAA3B;OADF;aAGOC,IAAP,CAAY,OAAZ;WACKjB,GAAL,CAASiB,IAAT,CAAcH,MAAd;;aAEOI,IAAP,CAAY,UAACC,CAAD,EAAIC,IAAJ,EAAa;;YAEnBC,UAAU,EAAd;YACIC,QAAQhB,EAAEc,IAAF,CAAZ;YACIG,YAAYD,MAAMT,IAAN,CAAW,UAAX,CAAhB;;eAEKvB,QAAL,CAAcyB,OAAd,CAAsB,UAACC,GAAD,EAAQ;;cAExBQ,YAAY,EAAhB;oBACUN,IAAV,CAAe,UAACO,CAAD,EAAIC,IAAJ,EAAY;gBACrBC,QAAQrB,EAAEoB,IAAF,CAAZ;gBACIE,UAAUD,MAAMd,IAAN,CAAW,UAAX,EAAuBgB,IAAvB,EAAd;;gBAEIb,IAAI,CAAJ,KAAUY,OAAd,EAAuB;0BACTD,MAAMd,IAAN,CAAW,YAAX,EAAyBgB,IAAzB,EAAZ;;WALJ;kBAQQZ,IAAR,CAAa,MAAMO,SAAN,GAAkB,GAA/B;SAXF;;YAcIM,iBAAiBR,MAAMT,IAAN,CAAW,gBAAX,EAA6BgB,IAA7B,EAArB;gBACQZ,IAAR,CAAaa,cAAb;;eAEK9B,GAAL,CAASiB,IAAT,CAAcI,OAAd;OAvBF;;;;8BA2BQ;;;;UAEJU,aAAa,8BAAjB;WACK/B,GAAL,CAASe,OAAT,CAAiB,UAACiB,SAAD,EAAYC,KAAZ,EAAoB;YAC/BC,aAAaF,UAAUG,IAAV,CAAe,GAAf,CAAjB;sBACcF,QAAQ,OAAKjC,GAAL,CAASoC,MAAjB,GAA0BF,aAAY,IAAtC,GAA6CA,UAA3D;OAFF;;UAKIG,aAAaC,UAAUP,UAAV,CAAjB;UACIQ,OAAOxD,SAASyD,aAAT,CAAuB,GAAvB,CAAX;WACKC,YAAL,CAAkB,MAAlB,EAA0BJ,UAA1B;WACKI,YAAL,CAAkB,UAAlB,EAA8B,cAA9B;eACSC,IAAT,CAAcC,WAAd,CAA0BJ,IAA1B,EAZQ;WAaHK,KAAL;;;;iCAGW;;;UACPC,UAAUvC,EAAE,SAAF,CAAd;UACIwC,WAAWD,QAAQhC,IAAR,CAAa,UAAb,CAAf;;WAEKb,GAAL,CAASe,OAAT,CAAiB,UAACK,IAAD,EAAOD,CAAP,EAAa;YACxBA,IAAI,CAAR,EAAW;cACLG,QAAQhB,EAAE,oDAAF,CAAZ;eACKS,OAAL,CAAa,UAACgC,KAAD,EAAQC,CAAR,EAAc;gBACrBhC,MAAM,OAAKhB,GAAL,CAAS,CAAT,EAAYgD,CAAZ,EAAeC,OAAf,CAAuB,IAAIC,MAAJ,CAAW,GAAX,EAAgB,GAAhB,CAAvB,EAA6C,EAA7C,CAAV;oBACQH,MAAME,OAAN,CAAc,IAAIC,MAAJ,CAAW,GAAX,EAAgB,GAAhB,CAAd,EAAoC,EAApC,CAAR;gBACIC,QAAQ7C,EAAE,gBAAgBU,GAAhB,GAAsB,mBAAtB,GAA4C+B,KAA5C,GAAoD,aAAtD,CAAZ;gBACIC,KAAK5B,KAAKgB,MAAL,GAAc,CAAvB,EAA0B;sBAChB9B,EAAE,gBAAgBU,GAAhB,GAAsB,yEAAtB,GAAkG+B,KAAlG,GAA0G,UAA5G,CAAR;;kBAEIK,MAAN,CAAaD,KAAb;WAPF;mBASSC,MAAT,CAAgB9B,KAAhB;;OAZJ;;;;;;AAoBJvC,SAASvB,gBAAT,CAA0B,kBAA1B,EAA8C;SAAS,IAAI6B,IAAJ,EAAT;CAA9C;;"}